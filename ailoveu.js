const defaultLocale="en",defaultAlign="ltr",supportedLocales=["en","he","fr"],divs=document.querySelectorAll("div[align-left]");let locale="en",translations={};async function setLocale(t){if(t===locale)return;const e=await fetchTranslationsFor(t);locale=t,translations=e,document.documentElement.lang=t,langDirection=dir(t),langDirection!=defaultAlign&&(alert("language direction changed: "+langDirection),document.documentElement.dir=langDirection,"ltr"===langDirection?setAlignLeft():setAlignRight()),translatePage()}function setAlignRight(){for(const t of divs)t.setAttribute("align-right",""),t.removeAttribute("align-left")}function setAlignLeft(){for(const t of divs)t.setAttribute("align-left",""),t.removeAttribute("align-right")}function dir(t){return"he"===t?"rtl":"ltr"}async function fetchTranslationsFor(t){const e=`/locales/${t}.json`,n=await fetch(e);return await n.json()}function translatePage(){document.querySelectorAll("[data-i18n-key]").forEach(translateElement)}function translateElement(t){const e=t.getAttribute("data-i18n-key"),n=translations[e];t.innerText=n}function bindLocaleSwitcher(t){const e=document.querySelector("[data-i18n-switcher]");e.value=t,e.onchange=t=>{setLocale(t.target.value)}}function isSupported(t){return supportedLocales.indexOf(t)>-1}function supportedOrDefault(t){return t.find(isSupported)||"en"}function browserLocales(t=!1){return navigator.languages.map((e=>t?e.split("-")[0]:e))}document.addEventListener("DOMContentLoaded",(()=>{const t=supportedOrDefault(browserLocales(!0));setLocale(t),bindLocaleSwitcher(t)}));
